
server {
  listen 80;
  server_name _;

  # Buffers y headers para requests grandes en dev
  proxy_buffer_size 128k;
  proxy_buffers 4 256k;
  proxy_busy_buffers_size 256k;
  client_header_buffer_size 8k;
  large_client_header_buffers 16 128k;
  ignore_invalid_headers off;

  set $forwarded_proto $http_x_forwarded_proto;
  if ($forwarded_proto = '') {
    set $forwarded_proto $scheme;
  }

  location /health {
    return 200 "ok\n";
  }

${NGINX_SERVICE_LOCATIONS}
}
